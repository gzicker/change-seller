(window.webpackJsonpolimpica_change_seller_0_7_4=window.webpackJsonpolimpica_change_seller_0_7_4||[]).push([["ChangeSeller"],{0:function(e,n){e.exports=React},106:function(e,n,a){"use strict";a.r(n);var t=a(0),i=a.n(t),r=a(5),l=a(40),d=a(22),c=a.n(d),s=a(23),o=a.n(s),u=a(24),m=a.n(u),v=a(34),g=a(2),f=a(62),p=a.n(f),k=a(12),_=a.n(k),N=a(11),E=a.n(N),b=a(25),O=a.n(b),h=a(36),x=a(27),S=a(18),y=a.n(S),F=a(63),j=a.n(F),D=(a(85),["pagination__wrapper","pagination__buttons"]),R=function(e){var n=e.page,a=e.setPage,t=j()(D);return i.a.createElement("div",{className:"".concat(t.pagination__wrapper," pa4")},i.a.createElement("div",{className:"".concat(t.pagination__buttons)},i.a.createElement("div",{className:"ma4"},i.a.createElement(y.a,{variation:"tertiary",onClick:function(){return a((function(e){return Math.max(e-1,0)}))},disabled:1===n},"<")),i.a.createElement("div",{className:"ma4"},i.a.createElement(y.a,{variation:"tertiary",onClick:function(){return a((function(e){return e+1}))}}," ",">"," "))),i.a.createElement("div",null,i.a.createElement("p",null,"Page ",n)))},C=function(){var e=Object(t.useState)(""),n=Object(g.a)(e,2),a=n[0],i=n[1];return[function(e){var n=null==e?void 0:e.target,a=null==n?void 0:n.value;i(a)},a]},P=a(64),w=a.n(P),M=a(13),I=a(37),T=["canceled","invoiced"],z=function(e){var n=e.input,a=e.page,i=e.per_page,r=void 0===i?10:i,l=Object(t.useState)({data:[],loading:!1,error:""}),d=Object(g.a)(l,2),c=d[0],s=d[1],o=Object(I.a)(),u=o.getData,m=o.state,v=m.data,f=m.loading,p=m.error,k=Object(M.useLazyQuery)(w.a),_=Object(g.a)(k,2),N=_[0],E=_[1],b=E.data,O=E.loading,h=(v||{list:[{}]}).list,x=/^\w+.?[a-z]*@[a-z]{4,10}.{1}[a-z]{2,10}.?[a-z]{0,10}$/,S=/^[SLR]*[0-9\-?]{10,}$/,y=function(e){return e?null==e?void 0:e.filter((function(e){return!T.includes(null==e?void 0:e.status)})):[]};return Object(t.useEffect)((function(){s(Object.assign(Object.assign({},c),{loading:f||O}))}),[f,O]),Object(t.useEffect)((function(){if(p){s(Object.assign(Object.assign({},c),{error:"Ocurrió un error buscando las ordenes"}))}}),[p]),Object(t.useEffect)((function(){var e,n=y(null===(e=null==b?void 0:b.listOrders)||void 0===e?void 0:e.list);n&&n.length&&s(Object.assign(Object.assign({},c),{data:n,loading:!1}))}),[b]),Object(t.useEffect)((function(){h&&h.length>0?s(Object.assign(Object.assign({},c),{loading:!1,data:y(h)})):s(Object.assign(Object.assign({},c),{loading:!1,data:[v]}))}),[v]),[function(){var e=null==n?void 0:n.match(x),t=null==n?void 0:n.match(S);if(n){if(null==e?void 0:e.length){N({variables:{data:{email:n,page:a,per_page:r}}})}else if(null==t?void 0:t.length){var i="/api/oms/pvt/orders/".concat(n,"?per_page=",10,"&page=").concat(a);u(i)}}else{var l="/api/oms/pvt/orders/?per_page=".concat(10,"&page=",a);u(l)}},c]},V=function(){var e=C(),n=Object(g.a)(e,2),a=n[0],r=n[1],l=Object(t.useState)(1),d=Object(g.a)(l,2),c=d[0],s=d[1],o=z({input:r,page:c}),u=Object(g.a)(o,2),m=u[0],v=u[1],f=v.data,k=v.loading,N=v.error,b=Object(t.useState)(""),S=Object(g.a)(b,2),y=S[0],F=S[1];Object(t.useEffect)((function(){m()}),[c]),Object(t.useEffect)((function(){var e,n=null===(e=f[0])||void 0===e?void 0:e.list;n&&!(null==n?void 0:n.length)?F("Ordenes no encontradas"):F("")}),[f]);var j;return i.a.createElement("div",null,i.a.createElement(p.a,{placeholder:"Búscar ordenes por correo o Id de la orden...",size:"regular",value:r,onChange:a,onSubmit:function(){m()}}),i.a.createElement(_.a,{orientation:"horizontal"}),k&&!N?i.a.createElement(O.a,null):i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"pa3 t-action--small c-action-primary"},y),i.a.createElement(_.a,{orientation:"horizontal"}),i.a.createElement(E.a,{fullWidth:!0,schema:x.a,items:(j=["canceled"],f.filter((function(e){return!j.includes(null==e?void 0:e.status)}))),onRowClick:function(e){var n,a=e.rowData;return n=null==a?void 0:a.orderId,void location.assign("/admin/app/change-seller/".concat(n))}}),i.a.createElement(R,{page:c,setPage:s})),N&&i.a.createElement(h.a,{open:!0,error:!0}))},B=new l.QueryClient,L=function(){var e=Object(v.a)(),n=e.owner,a=e.message;return i.a.createElement(c.a,{pageHeader:i.a.createElement(m.a,{title:i.a.createElement(r.FormattedMessage,{id:"change-seller.navigation.label-table"})})},n?i.a.createElement(o.a,{variation:"full"},i.a.createElement(l.QueryClientProvider,{client:B},i.a.createElement(V,null))):i.a.createElement("div",{className:"flex vh-100 items-center justify-center"},i.a.createElement("h5",{className:"t-heading-5"},a)))};n.default=L},11:function(e,n){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/Table"]},12:function(e,n){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/Divider"]},13:function(e,n){e.exports=ReactApollo},18:function(e,n){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/Button"]},20:function(e,n){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/Modal"]},22:function(e,n){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/Layout"]},23:function(e,n){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/PageBlock"]},24:function(e,n){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/PageHeader"]},25:function(e,n){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/Spinner"]},5:function(e,n){e.exports=ReactIntl},50:function(e,n){e.exports=regeneratorRuntime},61:function(e,n){e.exports=ReactDOM},62:function(e,n){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/InputSearch"]},63:function(e,n){e.exports=__RENDER_8_COMPONENTS__["vtex.css-handles@0.x/useCssHandles"]},64:function(e,n){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getOrdersByEmail"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NamedType",name:{kind:"Name",value:"IListOrders"}},directives:[]}],directives:[{kind:"Directive",name:{kind:"Name",value:"context"},arguments:[{kind:"Argument",name:{kind:"Name",value:"sender"},value:{kind:"StringValue",value:"olimpica.change-seller@0.7.4",block:!1}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"listOrders"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"context"},arguments:[{kind:"Argument",name:{kind:"Name",value:"provider"},value:{kind:"StringValue",value:"olimpica@change-seller",block:!1}}]},{kind:"Directive",name:{kind:"Name",value:"runtimeMeta"},arguments:[{kind:"Argument",name:{kind:"Name",value:"hash"},value:{kind:"StringValue",value:"e625cb780a17761f4da2ab9e6a695e3b47f1ebfcebc7aeacb55c245edfccbc9e",block:!1}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"list"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"orderId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"creationDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clientName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalValue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"paymentNames"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"statusDescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"marketPlaceOrderId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sequence"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"salesChannel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"affiliateId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"origin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastMessageUnread"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"orderIsComplete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorizedDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"callCenterOperatorName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalItems"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currencyCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hostname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"orderFormId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"paging"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"perPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:767}};a.loc.source={body:'query getOrdersByEmail($data: IListOrders) @context(sender: "olimpica.change-seller@0.7.4") {\n  listOrders(data: $data) @context(provider: "olimpica@change-seller") @runtimeMeta(hash: "e625cb780a17761f4da2ab9e6a695e3b47f1ebfcebc7aeacb55c245edfccbc9e") {\n    list {\n      orderId\n      creationDate\n      clientName\n      totalValue\n      paymentNames\n      status\n      statusDescription\n      marketPlaceOrderId\n      sequence\n      salesChannel\n      affiliateId\n      origin\n      lastMessageUnread\n      orderIsComplete\n      authorizedDate\n      callCenterOperatorName\n      totalItems\n      currencyCode\n      hostname\n      orderFormId\n      __typename\n    }\n    paging {\n      total\n      perPage\n      currentPage\n      __typename\n    }\n    __typename\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function i(e,n){for(var a=0;a<e.definitions.length;a++){var t=e.definitions[a];if(t.name&&t.name.value==n)return t}}a.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,a){if("FragmentSpread"===n.kind)a.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&a.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,a)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,a)})),n.definitions&&n.definitions.forEach((function(n){e(n,a)}))}(e,n),t[e.name.value]=n}})),e.exports=a,e.exports.getOrdersByEmail=function(e,n){var a={kind:e.kind,definitions:[i(e,n)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var r=t[n]||new Set,l=new Set,d=new Set;for(r.forEach((function(e){d.add(e)}));d.size>0;){var c=d;d=new Set,c.forEach((function(e){l.has(e)||(l.add(e),(t[e]||new Set).forEach((function(e){d.add(e)})))}))}return l.forEach((function(n){var t=i(e,n);t&&a.definitions.push(t)})),a}(a,"getOrdersByEmail")},84:function(e,n,a){"use strict";a.r(n),function(e){var n=a(21);a.p=Object(n.getPublicPath)("olimpica.change-seller@0.7.4");var t=Object(n.register)((function(){return a(106)}),e,"olimpica.change-seller@0.7.4","olimpica.change-seller@0.x","ChangeSeller");t.renderHotReload,t.setupHMR}.call(this,a(46)(e))},85:function(e,n,a){e.exports={pagination__wrapper:"olimpica-change-seller-0-x-pagination__wrapper",pagination__buttons:"olimpica-change-seller-0-x-pagination__buttons"}}},[[84,"common",0,2,1]]]);