"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Catalog = void 0;
const api_1 = require("@vtex/api");
const seller_1 = require("../utils/seller");
const request_1 = require("../utils/request");
const baseURL = '/api/catalog';
const baseURLLegacy = '/api/catalog_system';
const routes = {
    productsAndSkus: (from, to) => `${baseURLLegacy}/pvt/products/GetProductAndSkuIds?_from=${from}&_to=${to}`,
    getCategoryById: (categoryId) => `${baseURL}/pvt/category/${categoryId}`,
    getSkuById: (skuId) => `${baseURL}/pvt/stockkeepingunit/${skuId}`,
    getSkuContext: (skuId) => `${baseURLLegacy}/pvt/sku/stockkeepingunitbyid/${skuId}`,
    changeNotification: (sellerId, skuId) => `${baseURLLegacy}/pvt/skuseller/changenotification/${sellerId}/${skuId}`,
    seller: (sellerId) => `${baseURLLegacy}/pvt/seller/${sellerId}`,
    sellerList: `${baseURLLegacy}/pvt/seller/list`,
    getBrandById: (brandId) => `${baseURLLegacy}/pvt/brand/${brandId}`,
};
class Catalog extends api_1.JanusClient {
    constructor(ctx, options) {
        super(ctx, {
            ...options,
        });
    }
    getCategoryById(categoryId, authMethod = 'AUTH_TOKEN', tracingConfig) {
        const metric = 'catalog-getCategoryMetric';
        return this.http.get(routes.getCategoryById(categoryId), request_1.getRequestConfig(this.context, authMethod, metric, tracingConfig));
    }
    // eslint-disable-next-line max-params
    getProductsAndSkus(from = 1, to = 20, authMethod = 'AUTH_TOKEN', tracingConfig) {
        const metric = 'catalog-getProductsAndSkus';
        return this.http.get(routes.productsAndSkus(from, to), request_1.getRequestConfig(this.context, authMethod, metric, tracingConfig));
    }
    getSkuById(skuId, authMethod = 'AUTH_TOKEN', tracingConfig) {
        const metric = 'catalog-getSkuMetric';
        return this.http.get(routes.getSkuById(skuId), request_1.getRequestConfig(this.context, authMethod, metric, tracingConfig));
    }
    getSkuContext(skuId, authMethod = 'AUTH_TOKEN', tracingConfig) {
        const metric = 'catalog-getSkuContextMetric';
        return this.http.get(routes.getSkuContext(skuId), request_1.getRequestConfig(this.context, authMethod, metric, tracingConfig));
    }
    changeNotification({ sellerId, sellerSkuId, authMethod = 'AUTH_TOKEN', }, tracingConfig) {
        const metric = 'catalog-changeNotification';
        return this.http.post(routes.changeNotification(sellerId, sellerSkuId), {}, request_1.getRequestConfig(this.context, authMethod, metric, tracingConfig));
    }
    createSeller(seller, authMethod = 'AUTH_TOKEN', tracingConfig) {
        const metric = 'catalog-createSeller';
        const sellerInfo = seller_1.checkSellerInformation(seller);
        return this.http.post(routes.seller(sellerInfo.SellerId), sellerInfo, request_1.getRequestConfig(this.context, authMethod, metric, tracingConfig));
    }
    getSellerList(authMethod = 'AUTH_TOKEN', tracingConfig) {
        const metric = 'catalog-getSellerList';
        return this.http.get(routes.sellerList, request_1.getRequestConfig(this.context, authMethod, metric, tracingConfig));
    }
    seller(id, authMethod = 'AUTH_TOKEN', tracingConfig) {
        const metric = 'catalog-seller';
        return this.http.get(routes.seller(id), request_1.getRequestConfig(this.context, authMethod, metric, tracingConfig));
    }
    getBrandById(brandId, authMethod = 'AUTH_TOKEN', tracingConfig) {
        const metric = 'catalog-getBrandMetric';
        return this.http.get(routes.getBrandById(brandId), request_1.getRequestConfig(this.context, authMethod, metric, tracingConfig));
    }
}
exports.Catalog = Catalog;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2F0YWxvZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9ub2RlL2NsaWVudHMvY2F0YWxvZy9jYXRhbG9nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUtBLG1DQUF1QztBQUV2Qyw0Q0FBd0Q7QUFTeEQsOENBQW1EO0FBRW5ELE1BQU0sT0FBTyxHQUFHLGNBQWMsQ0FBQTtBQUM5QixNQUFNLGFBQWEsR0FBRyxxQkFBcUIsQ0FBQTtBQUUzQyxNQUFNLE1BQU0sR0FBRztJQUNiLGVBQWUsRUFBRSxDQUFDLElBQVksRUFBRSxFQUFVLEVBQUUsRUFBRSxDQUM1QyxHQUFHLGFBQWEsMkNBQTJDLElBQUksUUFBUSxFQUFFLEVBQUU7SUFDN0UsZUFBZSxFQUFFLENBQUMsVUFBa0IsRUFBRSxFQUFFLENBQ3RDLEdBQUcsT0FBTyxpQkFBaUIsVUFBVSxFQUFFO0lBQ3pDLFVBQVUsRUFBRSxDQUFDLEtBQWEsRUFBRSxFQUFFLENBQUMsR0FBRyxPQUFPLHlCQUF5QixLQUFLLEVBQUU7SUFDekUsYUFBYSxFQUFFLENBQUMsS0FBYSxFQUFFLEVBQUUsQ0FDL0IsR0FBRyxhQUFhLGlDQUFpQyxLQUFLLEVBQUU7SUFDMUQsa0JBQWtCLEVBQUUsQ0FBQyxRQUFnQixFQUFFLEtBQWEsRUFBRSxFQUFFLENBQ3RELEdBQUcsYUFBYSxxQ0FBcUMsUUFBUSxJQUFJLEtBQUssRUFBRTtJQUMxRSxNQUFNLEVBQUUsQ0FBQyxRQUFnQixFQUFFLEVBQUUsQ0FBQyxHQUFHLGFBQWEsZUFBZSxRQUFRLEVBQUU7SUFDdkUsVUFBVSxFQUFFLEdBQUcsYUFBYSxrQkFBa0I7SUFDOUMsWUFBWSxFQUFFLENBQUMsT0FBZSxFQUFFLEVBQUUsQ0FBQyxHQUFHLGFBQWEsY0FBYyxPQUFPLEVBQUU7Q0FDM0UsQ0FBQTtBQUVELE1BQWEsT0FBUSxTQUFRLGlCQUFXO0lBQ3RDLFlBQVksR0FBYyxFQUFFLE9BQXlCO1FBQ25ELEtBQUssQ0FB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LENBQUMsVUFBVSxFQUNqQiwwQkFBZ0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsYUFBYSxDQUFDLENBQ2xFLENBQUE7SUFDSCxDQUFDO0lBRU0sTUFBTSxDQUNYLEVBQVUsRUFDVixhQUF5QixZQUFZLEVBQ3JDLGFBQW9DO1FBRXBDLE1BQU0sTUFBTSxHQUFHLGdCQUFnQixDQUFBO1FBRS9CLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQ2xCLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQ2pCLDBCQUFnQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxhQUFhLENBQUMsQ0FDbEUsQ0FBQTtJQUNILENBQUM7SUFFTSxZQUFZLENBQ2pCLE9BQWUsRUFDZixhQUF5QixZQUFZLEVBQ3JDLGFBQW9DO1FBRXBDLE1BQU0sTUFBTSxHQUFHLHdCQUF3QixDQUFBO1FBRXZDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQ2xCLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEVBQzVCLDBCQUFnQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxhQUFhLENBQUMsQ0FDbEUsQ0FBQTtJQUNILENBQUM7Q0FDRjtBQWxJRCwwQkFrSUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7XG4gIEluc3RhbmNlT3B0aW9ucyxcbiAgSU9Db250ZXh0LFxuICBSZXF1ZXN0VHJhY2luZ0NvbmZpZyxcbn0gZnJvbSAnQHZ0ZXgvYXBpJ1xuaW1wb3J0IHsgSmFudXNDbGllbnQgfSBmcm9tICdAdnRleC9hcGknXG5cbmltcG9ydCB7IGNoZWNrU2VsbGVySW5mb3JtYXRpb24gfSBmcm9tICcuLi91dGlscy9zZWxsZXInXG5pbXBvcnQgdHlwZSB7IEF1dGhNZXRob2QgfSBmcm9tICcuLi90eXBpbmdzL3Rva2VucydcbmltcG9ydCB0eXBlIHtcbiAgR2V0U2t1UmVzcG9uc2UsXG4gIEdldFNrdUNvbnRleHRSZXNwb25zZSxcbiAgU2VsbGVyLFxuICBDYXRlZ29yeSxcbiAgR2V0QnJhbmRSZXNwb25zZSxcbn0gZnJvbSAnLi4vdHlwaW5ncy9jYXRhbG9nJ1xuaW1wb3J0IHsgZ2V0UmVxdWVzdENvbmZpZyB9IGZyb20gJy4uL3V0aWxzL3JlcXVlc3QnXG5cbmNvbnN0IGJhc2VVUkwgPSAnL2FwaS9jYXRhbG9nJ1xuY29uc3QgYmFzZVVSTExlZ2FjeSA9ICcvYXBpL2NhdGFsb2dfc3lzdGVtJ1xuXG5jb25zdCByb3V0ZXMgPSB7XG4gIHByb2R1Y3RzQW5kU2t1czogKGZyb206IG51bWJlciwgdG86IG51bWJlcikgPT5cbiAgICBgJHtiYXNlVVJMTGVnYWN5fS9wdnQvcHJvZHVjdHMvR2V0UHJvZHVjdEFuZFNrdUlkcz9fZnJvbT0ke2Zyb219Jl90bz0ke3RvfWAsXG4gIGdldENhdGVnb3J5QnlJZDogKGNhdGVnb3J5SWQ6IHN0cmluZykgPT5cbiAgICBgJHtiYXNlVVJMfS9wdnQvY2F0ZWdvcnkvJHtjYXRlZ29yeUlkfWAsXG4gIGdldFNrdUJ5SWQ6IChza3VJZDogc3RyaW5nKSA9PiBgJHtiYXNlVVJMfS9wdnQvc3RvY2trZWVwaW5ndW5pdC8ke3NrdUlkfWAsXG4gIGdldFNrdUNvbnRleHQ6IChza3VJZDogc3RyaW5nKSA9PlxuICAgIGAke2Jhc2VVUkxMZWdhY3l9L3B2dC9za3Uvc3RvY2trZWVwaW5ndW5pdGJ5aWQvJHtza3VJZH1gLFxuICBjaGFuZ2VOb3RpZmljYXRpb246IChzZWxsZXJJZDogc3RyaW5nLCBza3VJZDogc3RyaW5nKSA9PlxuICAgIGAke2Jhc2VVUkxMZWdhY3l9L3B2dC9za3VzZWxsZXIvY2hhbmdlbm90aWZpY2F0aW9uLyR7c2VsbGVySWR9LyR7c2t1SWR9YCxcbiAgc2VsbGVyOiAoc2VsbGVySWQ6IHN0cmluZykgPT4gYCR7YmFzZVVSTExlZ2FjeX0vcHZ0L3NlbGxlci8ke3NlbGxlcklkfWAsXG4gIHNlbGxlckxpc3Q6IGAke2Jhc2VVUkxMZWdhY3l9L3B2dC9zZWxsZXIvbGlzdGAsXG4gIGdldEJyYW5kQnlJZDogKGJyYW5kSWQ6IHN0cmluZykgPT4gYCR7YmFzZVVSTExlZ2FjeX0vcHZ0L2JyYW5kLyR7YnJhbmRJZH1gLFxufVxuXG5leHBvcnQgY2xhc3MgQ2F0YWxvZyBleHRlbmRzIEphbnVzQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoY3R4OiBJT0NvbnRleHQsIG9wdGlvbnM/OiBJbnN0YW5jZU9wdGlvbnMpIHtcbiAgICBzdXBlcihjdHgsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfSlcbiAgfVxuXG4gIHB1YmxpYyBnZXRDYXRlZ29yeUJ5SWQoXG4gICAgY2F0ZWdvcnlJZDogc3RyaW5nLFxuICAgIGF1dGhNZXRob2Q6IEF1dGhNZXRob2QgPSAnQVVUSF9UT0tFTicsXG4gICAgdHJhY2luZ0NvbmZpZz86IFJlcXVlc3RUcmFjaW5nQ29uZmlnXG4gICk6IFByb21pc2U8Q2F0ZWdvcnkgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBtZXRyaWMgPSAnY2F0YWxvZy1nZXRDYXRlZ29yeU1ldHJpYydcblxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0PENhdGVnb3J5PihcbiAgICAgIHJvdXRlcy5nZXRDYXRlZ29yeUJ5SWQoY2F0ZWdvcnlJZCksXG4gICAgICBnZXRSZXF1ZXN0Q29uZmlnKHRoaXMuY29udGV4dCwgYXV0aE1ldGhvZCwgbWV0cmljLCB0cmFjaW5nQ29uZmlnKVxuICAgIClcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtcGFyYW1zXG4gIHB1YmxpYyBnZXRQcm9kdWN0c0FuZFNrdXMoXG4gICAgZnJvbSA9IDEsXG4gICAgdG8gPSAyMCxcbiAgICBhdXRoTWV0aG9kOiBBdXRoTWV0aG9kID0gJ0FVVEhfVE9LRU4nLFxuICAgIHRyYWNpbmdDb25maWc/OiBSZXF1ZXN0VHJhY2luZ0NvbmZpZ1xuICApIHtcbiAgICBjb25zdCBtZXRyaWMgPSAnY2F0YWxvZy1nZXRQcm9kdWN0c0FuZFNrdXMnXG5cbiAgICByZXR1cm4gdGhpcy5odHRwLmdldChcbiAgICAgIHJvdXRlcy5wcm9kdWN0c0FuZFNrdXMoZnJvbSwgdG8pLFxuICAgICAgZ2V0UmVxdWVzdENvbmZpZyh0aGlzLmNvbnRleHQsIGF1dGhNZXRob2QsIG1ldHJpYywgdHJhY2luZ0NvbmZpZylcbiAgICApXG4gIH1cblxuICBwdWJsaWMgZ2V0U2t1QnlJZChcbiAgICBza3VJZDogc3RyaW5nLFxuICAgIGF1dGhNZXRob2Q6IEF1dGhNZXRob2QgPSAnQVVUSF9UT0tFTicsXG4gICAgdHJhY2luZ0NvbmZpZz86IFJlcXVlc3RUcmFjaW5nQ29uZmlnXG4gICkge1xuICAgIGNvbnN0IG1ldHJpYyA9ICdjYXRhbG9nLWdldFNrdU1ldHJpYydcblxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0PEdldFNrdVJlc3BvbnNlPihcbiAgICAgIHJvdXRlcy5nZXRTa3VCeUlkKHNrdUlkKSxcbiAgICAgIGdldFJlcXVlc3RDb25maWcodGhpcy5jb250ZXh0LCBhdXRoTWV0aG9kLCBtZXRyaWMsIHRyYWNpbmdDb25maWcpXG4gICAgKVxuICB9XG5cbiAgcHVibGljIGdldFNrdUNvbnRleHQoXG4gICAgc2t1SWQ6IHN0cmluZyxcbiAgICBhdXRoTWV0aG9kOiBBdXRoTWV0aG9kID0gJ0FVVEhfVE9LRU4nLFxuICAgIHRyYWNpbmdDb25maWc/OiBSZXF1ZXN0VHJhY2luZ0NvbmZpZ1xuICApIHtcbiAgICBjb25zdCBtZXRyaWMgPSAnY2F0YWxvZy1nZXRTa3VDb250ZXh0TWV0cmljJ1xuXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8R2V0U2t1Q29udGV4dFJlc3BvbnNlPihcbiAgICAgIHJvdXRlcy5nZXRTa3VDb250ZXh0KHNrdUlkKSxcbiAgICAgIGdldFJlcXVlc3RDb25maWcodGhpcy5jb250ZXh0LCBhdXRoTWV0aG9kLCBtZXRyaWMsIHRyYWNpbmdDb25maWcpXG4gICAgKVxuICB9XG5cbiAgcHVibGljIGNoYW5nZU5vdGlmaWNhdGlvbihcbiAgICB7XG4gICAgICBzZWxsZXJJZCxcbiAgICAgIHNlbGxlclNrdUlkLFxuICAgICAgYXV0aE1ldGhvZCA9ICdBVVRIX1RPS0VOJyxcbiAgICB9OiBDaGFuZ2VOb3RpZmljYXRpb25BcmdzLFxuICAgIHRyYWNpbmdDb25maWc/OiBSZXF1ZXN0VHJhY2luZ0NvbmZpZ1xuICApIHtcbiAgICBjb25zdCBtZXRyaWMgPSAnY2F0YWxvZy1jaGFuZ2VOb3RpZmljYXRpb24nXG5cbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoXG4gICAgICByb3V0ZXMuY2hhbmdlTm90aWZpY2F0aW9uKHNlbGxlcklkLCBzZWxsZXJTa3VJZCksXG4gICAgICB7fSxcbiAgICAgIGdldFJlcXVlc3RDb25maWcodGhpcy5jb250ZXh0LCBhdXRoTWV0aG9kLCBtZXRyaWMsIHRyYWNpbmdDb25maWcpXG4gICAgKVxuICB9XG5cbiAgcHVibGljIGNyZWF0ZVNlbGxlcihcbiAgICBzZWxsZXI6IFNlbGxlcixcbiAgICBhdXRoTWV0aG9kOiBBdXRoTWV0aG9kID0gJ0FVVEhfVE9LRU4nLFxuICAgIHRyYWNpbmdDb25maWc/OiBSZXF1ZXN0VHJhY2luZ0NvbmZpZ1xuICApIHtcbiAgICBjb25zdCBtZXRyaWMgPSAnY2F0YWxvZy1jcmVhdGVTZWxsZXInXG4gICAgY29uc3Qgc2VsbGVySW5mbyA9IGNoZWNrU2VsbGVySW5mb3JtYXRpb24oc2VsbGVyKVxuXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KFxuICAgICAgcm91dGVzLnNlbGxlcihzZWxsZXJJbmZvLlNlbGxlcklkKSxcbiAgICAgIHNlbGxlckluZm8sXG4gICAgICBnZXRSZXF1ZXN0Q29uZmlnKHRoaXMuY29udGV4dCwgYXV0aE1ldGhvZCwgbWV0cmljLCB0cmFjaW5nQ29uZmlnKVxuICAgIClcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZWxsZXJMaXN0KFxuICAgIGF1dGhNZXRob2Q6IEF1dGhNZXRob2QgPSAnQVVUSF9UT0tFTicsXG4gICAgdHJhY2luZ0NvbmZpZz86IFJlcXVlc3RUcmFjaW5nQ29uZmlnXG4gICkge1xuICAgIGNvbnN0IG1ldHJpYyA9ICdjYXRhbG9nLWdldFNlbGxlckxpc3QnXG5cbiAgICByZXR1cm4gdGhpcy5odHRwLmdldDxTZWxsZXJbXT4oXG4gICAgICByb3V0ZXMuc2VsbGVyTGlzdCxcbiAgICAgIGdldFJlcXVlc3RDb25maWcodGhpcy5jb250ZXh0LCBhdXRoTWV0aG9kLCBtZXRyaWMsIHRyYWNpbmdDb25maWcpXG4gICAgKVxuICB9XG5cbiAgcHVibGljIHNlbGxlcihcbiAgICBpZDogc3RyaW5nLFxuICAgIGF1dGhNZXRob2Q6IEF1dGhNZXRob2QgPSAnQVVUSF9UT0tFTicsXG4gICAgdHJhY2luZ0NvbmZpZz86IFJlcXVlc3RUcmFjaW5nQ29uZmlnXG4gICkge1xuICAgIGNvbnN0IG1ldHJpYyA9ICdjYXRhbG9nLXNlbGxlcidcblxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0PFNlbGxlcj4oXG4gICAgICByb3V0ZXMuc2VsbGVyKGlkKSxcbiAgICAgIGdldFJlcXVlc3RDb25maWcodGhpcy5jb250ZXh0LCBhdXRoTWV0aG9kLCBtZXRyaWMsIHRyYWNpbmdDb25maWcpXG4gICAgKVxuICB9XG5cbiAgcHVibGljIGdldEJyYW5kQnlJZChcbiAgICBicmFuZElkOiBzdHJpbmcsXG4gICAgYXV0aE1ldGhvZDogQXV0aE1ldGhvZCA9ICdBVVRIX1RPS0VOJyxcbiAgICB0cmFjaW5nQ29uZmlnPzogUmVxdWVzdFRyYWNpbmdDb25maWdcbiAgKSB7XG4gICAgY29uc3QgbWV0cmljID0gJ2NhdGFsb2ctZ2V0QnJhbmRNZXRyaWMnXG5cbiAgICByZXR1cm4gdGhpcy5odHRwLmdldDxHZXRCcmFuZFJlc3BvbnNlPihcbiAgICAgIHJvdXRlcy5nZXRCcmFuZEJ5SWQoYnJhbmRJZCksXG4gICAgICBnZXRSZXF1ZXN0Q29uZmlnKHRoaXMuY29udGV4dCwgYXV0aE1ldGhvZCwgbWV0cmljLCB0cmFjaW5nQ29uZmlnKVxuICAgIClcbiAgfVxufVxuXG5pbnRlcmZhY2UgQ2hhbmdlTm90aWZpY2F0aW9uQXJncyB7XG4gIHNlbGxlcklkOiBzdHJpbmdcbiAgc2VsbGVyU2t1SWQ6IHN0cmluZ1xuICBhdXRoTWV0aG9kPzogQXV0aE1ldGhvZFxufVxuIl19